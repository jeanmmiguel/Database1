DROP TABLE IF EXISTS AULA_AVULSA_TEM_TIPO;
DROP TABLE IF EXISTS ESPORADICO_FAZ_AULA_AVULSA;
DROP TABLE IF EXISTS AULA_AVULSA;
DROP TABLE IF EXISTS SUBSTITUTO;
DROP TABLE IF EXISTS CONTRATADO;
DROP TABLE IF EXISTS TURMAS;
DROP TABLE IF EXISTS INSCRICAO;
DROP TABLE IF EXISTS ESPORADICO;
DROP TABLE IF EXISTS FIXOS;
DROP TABLE IF EXISTS ENDERECOS;
DROP TABLE IF EXISTS ALUNOS;
DROP TABLE IF EXISTS CURSOS;
DROP TABLE IF EXISTS TIPO;
DROP TABLE IF EXISTS PROFESSOR;


CREATE TABLE PROFESSOR(
CPF_PROFESSOR VARCHAR(200) PRIMARY KEY,
NOME_PROFESSOR VARCHAR(300),
TELEFONE_PROFESSOR CHAR(20)
);

CREATE TABLE TIPO(
ID INTEGER PRIMARY KEY,
NOME VARCHAR(100),
MATERIAL_EXTRA VARCHAR(100)
);
CREATE TABLE CURSOS(
ID_CURSO INTEGER PRIMARY KEY,
NOME_CURSO VARCHAR(100),
NIVEL_CURSO VARCHAR(100),
LIVRO_CURSO VARCHAR(100)
);

CREATE TABLE ALUNOS(
CPF_ALUNO VARCHAR(200) PRIMARY KEY,
NOME_ALUNO VARCHAR(300),
RESPONSAVEL_ALUNO VARCHAR(100),
TELEFONE_ALUNO CHAR(20)
);

CREATE TABLE ENDERECOS(
CIDADE VARCHAR(100),
UF CHAR(2),
NUMERO INTEGER,
CEP VARCHAR(100),
CPF_ALUNO VARCHAR(200),
LOGRADOURO VARCHAR(200),
PRIMARY KEY(CEP,CPF_ALUNO),
FOREIGN KEY(CPF_ALUNO) REFERENCES ALUNOS(CPF_ALUNO) ON DELETE CASCADE
);
CREATE TABLE FIXOS(
CPF_FIXO VARCHAR(200),
VALOR_FIXO_MENSAL DECIMAL(10,2),
PRIMARY KEY (CPF_FIXO),
FOREIGN KEY (CPF_FIXO) REFERENCES ALUNOS (CPF_ALUNO) ON DELETE CASCADE
);

CREATE TABLE ESPORADICO(
CPF_ESPORADICO VARCHAR(200),
PRIMARY KEY (CPF_ESPORADICO),
FOREIGN KEY (CPF_ESPORADICO) REFERENCES ALUNOS (CPF_ALUNO) ON DELETE CASCADE
);


CREATE TABLE INSCRICAO(
COD_INSCRICAO INTEGER PRIMARY KEY,
PRECO_MATRICULA DECIMAL(10,2),
DATA_INICIO_SEMESTRE DATE,
DATA_FINAL_SEMESTRE DATE,
CPF_ALUNO_FIXO VARCHAR(200),
ID_CURSO INTEGER,
FOREIGN KEY(CPF_ALUNO_FIXO) REFERENCES ALUNOS (CPF_ALUNO),
FOREIGN KEY(ID_CURSO) REFERENCES CURSOS(ID_CURSO)
);

CREATE TABLE TURMAS(
CODIGO_TURMA INTEGER PRIMARY KEY,
HORARIO_TURMA TIME,
NUMERO_SALA INTEGER,
ID_CURSO INTEGER,
CPF_PROFESSOR VARCHAR(200),
FOREIGN KEY(CPF_PROFESSOR) REFERENCES PROFESSOR (CPF_PROFESSOR),
FOREIGN KEY(ID_CURSO) REFERENCES CURSOS (ID_CURSO)
);



CREATE TABLE CONTRATADO(
CPF_PROFESSOR_CONTRATADO VARCHAR(200) PRIMARY KEY,
SALARIO_MENSAL DECIMAL(10,2),
CARGA_HORARIA_MENSAL DECIMAL (10,2),
AULAS_DADAS_ATE_AGORA INTEGER,
FOREIGN KEY(CPF_PROFESSOR_CONTRATADO) REFERENCES PROFESSOR (CPF_PROFESSOR) ON DELETE CASCADE
);
CREATE TABLE SUBSTITUTO(
CPF_PROFESSOR_SUBSTITUTO VARCHAR(200) PRIMARY KEY,
QTDE_AULAS_DADAS INTEGER,
CARGA_HORARIA_DIARIA DECIMAL (10,2),
SALARIO_DIARIA DECIMAL (10,2),
FOREIGN KEY (CPF_PROFESSOR_SUBSTITUTO) REFERENCES PROFESSOR (CPF_PROFESSOR) ON DELETE CASCADE
);

CREATE TABLE AULA_AVULSA(
ID INTEGER PRIMARY KEY,
NUMERO_SALA INTEGER,
HORARIO TIME,
PRECO DECIMAL (10,2),
CPF_PROFESSOR VARCHAR(200),
FOREIGN KEY (CPF_PROFESSOR) REFERENCES PROFESSOR(CPF_PROFESSOR)
);

CREATE TABLE ESPORADICO_FAZ_AULA_AVULSA(
CPF VARCHAR(200),
ID INTEGER,
PRIMARY KEY(CPF,ID),
FOREIGN KEY (CPF) REFERENCES ALUNOS(CPF_ALUNO),
FOREIGN KEY (ID) REFERENCES AULA_AVULSA(ID)
);

CREATE TABLE AULA_AVULSA_TEM_TIPO(
ID_AULA_AVULSA INTEGER,
ID_TIPO INTEGER,
PRIMARY KEY (ID_AULA_AVULSA,ID_TIPO),
FOREIGN KEY (ID_AULA_AVULSA) REFERENCES AULA_AVULSA(ID),
FOREIGN KEY (ID_TIPO) REFERENCES TIPO(ID)
);